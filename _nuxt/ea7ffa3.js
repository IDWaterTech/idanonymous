(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{573:function(e,t,n){"use strict";n.r(t);var r=n(27),o=(n(98),n(26),n(7),n(72),n(53),n(39),n(24),n(78),n(80),n(466)),c=n.n(o),l=n(467),d=n.n(l);c.a.extend(d.a);var m,v,h,f,y,x,w,k,C={name:"IndexPage",data:function(){return{cryptopwd:"idwater@admin1235",masterDataOra:[],masterData:[],exclusiveCode:"IDWater12345",exclusiveContent:"",exclusiveContentshow:!1,headers:[{text:"提問時間",align:"center",sortable:!1,value:"time"},{text:"提問內容",align:"start",sortable:!1,value:"content"},{text:"回覆狀態",align:"start",sortable:!1,value:"action"}],desserts:[{id:1,time:"2022-01-01 12:00",content:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Aliquam, vitae?",reply:!0,replycontent:"11111Lorem ipsum dolor sit, amet consectetur adipisicing elit. Impedit possimus optio nam quidem beatae, veritatis vel consequuntur mollitia corporis doloribus!"},{id:2,time:"2022-01-01 12:00",content:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Aliquam, vitae?",reply:!1,replycontent:"22222Lorem ipsum dolor sit, amet consectetur adipisicing elit. Impedit possimus optio nam quidem beatae, veritatis vel consequuntur mollitia corporis doloribus!"}],replydig:!1,replyItem:{},switchreply:!1,rules:{pwdcheck:function(e){return e&&/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{6,}$/.test(e)||"6位數，(僅包含大寫字母、小寫字母、數字，禁止使用符號)"}},managedig:!1,newMan:"",menu_sdate:!1,sdate:"",menu_edate:!1,edate:"",opened_date:"",closed_date:""}},methods:{questionsubmit:(k=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={exclusiveCode:this.crypto(this.exclusiveCode),content:this.exclusiveContent},console.log(t);case 2:case"end":return e.stop()}}),e,this)}))),function(){return k.apply(this,arguments)}),crypto:function(e){return this.$CryptoJS.AES.encrypt(e,this.cryptopwd).toString()},decrypto:function(e){try{var t=this.$CryptoJS.AES.decrypt(e,this.cryptopwd).toString(this.CryptoJS.enc.Utf8);return""==t?"無法解譯":t}catch(e){return"無法解譯"}},showreplydig:function(e){this.replyItem=_.cloneDeep(e),this.replydig=!0},replysubmit:(w=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:this.replyItem.id,content:this.replyItem.replycontent},console.log(t),this.replyItem={},this.replydig=!1,e.next=7,this.$axios.get("https://jeff-site.herokuapp.com/api/movie/actor/").then((function(e){console.log(e.data),console.log("取得API:"+e.request.responseURL)})).catch((function(e){n.$toast.error("取得失敗:".concat(e),{duration:2e3})})).finally((function(){}));case 7:this.$toast.success("取得成功",{duration:2e3});case 8:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)}),sedatesubmit:(x=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={opened_date:this.sdate,closed_date:this.edate},e.next=4,this.$axios.patch("https://anonymous-api-site.herokuapp.com/api/qa/settings/1/",t).then((function(e){200==e.status&&n.$toast.success("設定時段成功",{duration:2e3}),n.getsedate()})).catch((function(e){n.$toast.error("設定時段失敗:".concat(e),{duration:2e3})}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return x.apply(this,arguments)}),getsedate:(y=Object(r.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.$axios.get("https://anonymous-api-site.herokuapp.com/api/qa/settings/").then((function(e){200==e.status&&(t.sdate=_.cloneDeep(e.data.opened_date),t.edate=_.cloneDeep(e.data.closed_date),t.opened_date=_.cloneDeep(e.data.opened_date),t.closed_date=_.cloneDeep(e.data.closed_date))})).catch((function(e){t.$toast.error("取得失敗:".concat(e),{duration:2e3})})).finally((function(){}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)}),getmasterdata:(f=Object(r.a)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.$axios.get("https://anonymous-api-site.herokuapp.com/api/qa/administrator/").then((function(e){t.masterDataOra=e.data,t.masterDataOra.map((function(e){return e.decrypted_code=t.decrypto(e.encrypted_code)})),t.masterData=e.data.map((function(e){return e.encrypted_code}))})).catch((function(e){t.$toast.error("取得失敗:".concat(e),{duration:2e3})})).finally((function(){}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)}),showmanagedig:function(){this.newMan="",this.managedig=!0},maneditsubmit:(h=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n,r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.$refs.manform.validate()){e.next=2;break}return e.abrupt("return");case 2:if(this.exclusiveCode!=this.newMan){e.next=5;break}return this.$toast.error("新密碼與舊密碼相同",{duration:2e3}),e.abrupt("return");case 5:if(0!=confirm("您要修改管理專屬碼：「".concat(this.exclusiveCode,"」為「").concat(this.newMan,"」？"))){e.next=8;break}return this.$toast.info("取消修改：「".concat(this.exclusiveCode,"」"),{duration:2e3}),e.abrupt("return");case 8:return t={encrypted_code:this.crypto(this.newMan)},n=this.masterDataOra.filter((function(e){return e.decrypted_code==o.exclusiveCode}))[0].id,r="https://anonymous-api-site.herokuapp.com/api/qa/administrator/".concat(n,"/"),e.next=13,this.$axios.patch(r,t).then((function(e){200==e.status?(o.getmasterdata(),o.exclusiveCode=o.newMan,o.newMan="",o.$toast.success("修改成功",{duration:2e3})):o.$toast.error("修改失敗：".concat(e.data),{duration:2e3}),console.log("修改API:"+e.request.responseURL)})).catch((function(e){o.$toast.error("取得失敗:".concat(e),{duration:2e3})})).finally((function(){}));case 13:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)}),mansubmit:(v=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.$refs.manform.validate()){e.next=2;break}return e.abrupt("return");case 2:if(this.newMan!=this.exclusiveCode){e.next=5;break}return this.$toast.error("新增失敗：與自己的管理專屬碼相同",{duration:2e3}),e.abrupt("return");case 5:return t={encrypted_code:this.crypto(this.newMan)},e.next=9,this.$axios.post("https://anonymous-api-site.herokuapp.com/api/qa/administrator/",t).then((function(e){e.data.hasOwnProperty("encrypted_code")?(n.newMan="",n.getmasterdata(),n.$toast.success("新增成功",{duration:2e3})):n.$toast.error("新增失敗：".concat(e.data),{duration:2e3}),console.log("取得API:"+e.request.responseURL)})).catch((function(e){n.$toast.error("取得失敗:".concat(e),{duration:2e3})})).finally((function(){}));case 9:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)}),mandel:(m=Object(r.a)(regeneratorRuntime.mark((function e(data){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=confirm("是否刪除".concat(this.decrypto(data.encrypted_code),"?"))){e.next=2;break}return e.abrupt("return");case 2:if(1!=(this.decrypto(data.encrypted_code)==this.exclusiveCode)){e.next=6;break}return this.$toast.error("刪除失敗：無法刪除自己管理碼",{duration:2e3}),e.abrupt("return");case 6:return t=data.id,n="https://anonymous-api-site.herokuapp.com/api/qa/administrator/".concat(t,"/"),e.next=10,this.$axios.delete(n).then((function(e){204==e.status?(r.getmasterdata(),r.$toast.success("刪除成功",{duration:2e3})):r.$toast.error("刪除失敗：".concat(e.data),{duration:2e3}),console.log("取得API:"+e.request.responseURL)})).catch((function(e){r.$toast.error("取得失敗:".concat(e),{duration:2e3})})).finally((function(){}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)}),getNowDate:function(){return c()().format("YYYY-MM-DD")}},computed:{master:function(){var e=this,data=this.masterData.map((function(t){return e.decrypto(t)}));return data.push("IDWater12345"),data.includes(this.exclusiveCode)},dayisBetween:function(){var e=c()(this.opened_date).add(-1,"day"),t=c()(this.closed_date).add(1,"day");return c()().isBetween(e,t)}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getmasterdata();case 2:return t.next=4,e.getsedate();case 4:case"end":return t.stop()}}),t)})))()}},$=C,S=n(83),D=n(136),R=n.n(D),I=n(459),V=n(437),M=n(417),O=n(440),j=n(464),A=n(570),L=n(571),P=n(575),B=n(447),T=n(567),J=n(441),N=n(460),U=n(465),Y=n(568),z=n(579),E=n(458),F=n(569),W=n(576),component=Object(S.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-col",{attrs:{cols:"12",sm:"10"}},[n("v-card",{staticClass:"logo py-4 justify-center rounded-xl",attrs:{light:""}},[n("v-card-title",{staticClass:"justify-center display-1 pb-0"},[n("span",{staticClass:"text--center"},[e._v("艾滴科技")])]),e._v(" "),n("v-card-title",{staticClass:"justify-center display-2"},[n("span",{staticClass:"text--center"},[e._v("執行長信箱")])]),e._v(" "),n("v-form",{ref:"mainform"},[n("v-card-text",[n("v-text-field",{staticClass:"mx-2",attrs:{outlined:"",placeholder:"請輸入專屬碼",clearable:"",counter:"12",maxlength:"12",rules:[e.rules.pwdcheck]},model:{value:e.exclusiveCode,callback:function(t){e.exclusiveCode=t},expression:"exclusiveCode"}},[n("span",{staticStyle:{width:"80px","font-size":"1.3em"},attrs:{slot:"prepend"},slot:"prepend"},[e._v("專屬碼")]),e._v(" "),n("v-icon",{attrs:{slot:"append",color:"success"},slot:"append"},[e._v("mdi-reload")])],1),e._v(" "),e.master?n("div",{staticClass:"text-center headline",staticStyle:{color:"red"}},[e._v("\n            注意：您正在使用管理專屬碼\n          ")]):e._e()],1),e._v(" "),n("v-card-text",{staticClass:"pt-0"},[n("v-btn",{class:e.dayisBetween?"info":"error",staticStyle:{color:"white"},attrs:{disabled:!e.dayisBetween},on:{click:function(t){e.exclusiveContentshow=!e.exclusiveContentshow}}},[e._v(e._s(e.dayisBetween?"我要提問":"未開放"))]),e._v(" "),e.master?n("v-btn",{staticClass:"primary",staticStyle:{color:"white"},on:{click:e.showmanagedig}},[e._v("管理設定")]):e._e(),e._v(" "),n("br"),e._v(" "),n("span",[e._v("可提問日期："+e._s(e.opened_date+"~"+e.closed_date))])],1),e._v(" "),n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:e.exclusiveContentshow,expression:"exclusiveContentshow"}]},[n("v-textarea",{attrs:{name:"input-7-1",outlined:"",label:"內容"},model:{value:e.exclusiveContent,callback:function(t){e.exclusiveContent=t},expression:"exclusiveContent"}})],1),e._v(" "),n("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:e.exclusiveContentshow,expression:"exclusiveContentshow"}]},[n("v-spacer"),e._v(" "),n("v-btn",{staticStyle:{color:"white"},attrs:{color:"primary",disabled:!e.exclusiveCode||e.exclusiveCode.length<=0},on:{click:e.questionsubmit}},[n("v-icon",[e._v("mdi-incognito")]),e._v("送出")],1)],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{width:"500"},model:{value:e.managedig,callback:function(t){e.managedig=t},expression:"managedig"}},[n("v-card",{attrs:{light:""}},[n("v-card-title",{staticClass:"headline"},[e._v("管理設定")]),e._v(" "),n("v-form",{ref:"manform"},[n("v-card-text",[n("span",{staticClass:"text-h6",staticStyle:{color:"purple"}},[e._v("管理專屬碼")]),e._v(" "),n("v-text-field",{attrs:{filled:"",dense:"",rules:[e.rules.pwdcheck],counter:"12",maxlength:"12",placeholder:"新增管理專屬碼"},model:{value:e.newMan,callback:function(t){e.newMan=t},expression:"newMan"}},[n("v-btn",{staticClass:"mr-1",staticStyle:{color:"white"},attrs:{slot:"append",rounded:"",disabled:!e.newMan,color:"primary mb-1"},on:{click:e.maneditsubmit},slot:"append"},[e._v("修改")]),e._v(" "),n("v-btn",{staticStyle:{color:"white"},attrs:{slot:"append",rounded:"",disabled:!e.newMan,color:"primary mb-1"},on:{click:e.mansubmit},slot:"append"},[e._v("新增")])],1),e._v(" "),e._l(e.masterDataOra,(function(t){return n("v-chip",{key:t.id,staticClass:"mx-1",attrs:{close:e.exclusiveCode!=e.decrypto(t.encrypted_code),outlined:"",color:(e.exclusiveCode,e.decrypto(t.encrypted_code),"purple"),label:""},on:{"click:close":function(n){return e.mandel(t)}}},[e._v(e._s(""+e.decrypto(t.encrypted_code)))])}))],2),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",[n("span",{staticClass:"text-h6",staticStyle:{color:"purple"}},[e._v("開放日期")]),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"5"}},[n("div",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"起日",filled:"",dense:"","prepend-icon":"mdi-calendar",readonly:"",clearable:""},on:{"click:prepend":function(){return e.sdate=e.getNowDate()}},model:{value:e.sdate,callback:function(t){e.sdate=t},expression:"sdate"}},"v-text-field",o,!1),r))]}}]),model:{value:e.menu_sdate,callback:function(t){e.menu_sdate=t},expression:"menu_sdate"}},[e._v(" "),n("v-date-picker",{attrs:{light:""},on:{input:function(t){e.menu_sdate=!1}},model:{value:e.sdate,callback:function(t){e.sdate=t},expression:"sdate"}})],1)],1)]),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"5"}},[n("div",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"訖日",filled:"",dense:"","prepend-icon":"mdi-calendar",readonly:"",clearable:""},on:{"click:prepend":function(){return e.edate=e.getNowDate()}},model:{value:e.edate,callback:function(t){e.edate=t},expression:"edate"}},"v-text-field",o,!1),r))]}}]),model:{value:e.menu_edate,callback:function(t){e.menu_edate=t},expression:"menu_edate"}},[e._v(" "),n("v-date-picker",{attrs:{light:""},on:{input:function(t){e.menu_edate=!1}},model:{value:e.edate,callback:function(t){e.edate=t},expression:"edate"}})],1)],1)]),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"2"}},[n("v-btn",{staticClass:"primary",staticStyle:{color:"white"},on:{click:e.sedatesubmit}},[e._v("確認")])],1)],1)],1)],1)],1)],1)],1),e._v(" "),n("v-col",{attrs:{cols:"12",sm:"10"}},[n("v-data-table",{staticClass:"rounded-xl",attrs:{headers:e.headers,items:e.switchreply?e.desserts.filter((function(e){return 0==e.reply})):e.desserts,"footer-props":{"items-per-page-options":[-1,25,50,100]},light:""},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{staticClass:"rounded-xl",attrs:{flat:""}},[n("v-spacer"),e._v(" "),n("v-switch",{attrs:{inset:"",label:"只顯示未回覆"},model:{value:e.switchreply,callback:function(t){e.switchreply=t},expression:"switchreply"}})],1)]},proxy:!0},{key:"item.action",fn:function(t){var r=t.item;return[n("v-btn",{staticStyle:{color:"white"},attrs:{color:r.reply?"primary":"warning"},on:{click:function(t){return e.showreplydig(r)}}},[e._v(e._s((r.reply?"查看":"開始")+"回覆"))])]}}],null,!0)}),e._v(" "),n("v-dialog",{attrs:{width:"500"},model:{value:e.replydig,callback:function(t){e.replydig=t},expression:"replydig"}},[n("v-card",{attrs:{light:""}},[n("v-card-title",[e._v("提問內容")]),e._v(" "),n("v-card-text",[e._v(e._s(e.replyItem.content))]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-title",[e._v("回覆內容")]),e._v(" "),e.master?n("v-card-text",[n("v-form",{ref:"replyform"},[n("v-textarea",{attrs:{filled:"",clearable:""},model:{value:e.replyItem.replycontent,callback:function(t){e.$set(e.replyItem,"replycontent",t)},expression:"replyItem.replycontent"}}),e._v(" "),n("v-btn",{staticClass:"primary",staticStyle:{color:"white"},attrs:{block:"",tile:"",disabled:0==String(e.replyItem.replycontent).trim().length},on:{click:e.replysubmit}},[e._v("確定送出")])],1)],1):n("v-card-text",[e._v("\n          "+e._s(1==e.replyItem.reply)+"\n          "+e._s(e.replyItem.replycontent)+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;R()(component,{VBtn:I.a,VCard:V.a,VCardActions:M.a,VCardText:M.b,VCardTitle:M.c,VChip:O.a,VCol:j.a,VDataTable:A.a,VDatePicker:L.a,VDialog:P.a,VDivider:B.a,VForm:T.a,VIcon:J.a,VMenu:N.a,VRow:U.a,VSpacer:Y.a,VSwitch:z.a,VTextField:E.a,VTextarea:F.a,VToolbar:W.a})}}]);