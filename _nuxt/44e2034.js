(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{572:function(t,e,n){"use strict";n.r(e);var r,o,c,l,d,m,v,h,f=n(27),y=(n(98),n(26),n(7),n(72),n(53),n(39),n(24),n(78),n(80),n(466)),x=n.n(y),w={name:"IndexPage",data:function(){return{cryptopwd:"idwater@admin1235",masterDataOra:[],masterData:[],exclusiveCode:"IDWater12345",exclusiveContent:"",exclusiveContentshow:!1,headers:[{text:"提問時間",align:"center",sortable:!1,value:"time"},{text:"提問內容",align:"start",sortable:!1,value:"content"},{text:"回覆狀態",align:"start",sortable:!1,value:"action"}],desserts:[{id:1,time:"2022-01-01 12:00",content:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Aliquam, vitae?",reply:!0,replycontent:"11111Lorem ipsum dolor sit, amet consectetur adipisicing elit. Impedit possimus optio nam quidem beatae, veritatis vel consequuntur mollitia corporis doloribus!"},{id:2,time:"2022-01-01 12:00",content:"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Aliquam, vitae?",reply:!1,replycontent:"22222Lorem ipsum dolor sit, amet consectetur adipisicing elit. Impedit possimus optio nam quidem beatae, veritatis vel consequuntur mollitia corporis doloribus!"}],replydig:!1,replyItem:{},switchreply:!1,rules:{pwdcheck:function(t){return t&&/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{6,}$/.test(t)||"6位數，(僅包含大寫字母、小寫字母、數字，禁止使用符號)"}},managedig:!1,newMan:"",menu_sdate:!1,sdate:"",menu_edate:!1,edate:""}},methods:{questionsubmit:(h=Object(f.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e={exclusiveCode:this.crypto(this.exclusiveCode),content:this.exclusiveContent},console.log(e);case 2:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)}),crypto:function(t){return this.$CryptoJS.AES.encrypt(t,this.cryptopwd).toString()},decrypto:function(t){try{var e=this.$CryptoJS.AES.decrypt(t,this.cryptopwd).toString(this.CryptoJS.enc.Utf8);return""==e?"無法解譯":e}catch(t){return"無法解譯"}},showreplydig:function(t){this.replyItem=_.cloneDeep(t),this.replydig=!0},replysubmit:(v=Object(f.a)(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:this.replyItem.id,content:this.replyItem.replycontent},console.log(e),this.replyItem={},this.replydig=!1,t.next=8,this.$axios.get("https://jeff-site.herokuapp.com/api/movie/actor/").then((function(t){console.log(t.data),console.log("取得API:"+t.request.responseURL)})).catch((function(t){n.$toast.error("取得失敗:".concat(t),{duration:2e3})})).finally((function(){}));case 8:this.$toast.success("取得成功",{duration:2e3});case 9:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)}),getsedate:(m=Object(f.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.sdate="2022-01-01",this.edate="2022-12-31";case 2:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)}),getmasterdata:(d=Object(f.a)(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.$axios.get("https://anonymous-api-site.herokuapp.com/api/qa/administrator/").then((function(t){e.masterDataOra=t.data,e.masterDataOra.map((function(t){return t.decrypted_code=e.decrypto(t.encrypted_code)})),e.masterData=t.data.map((function(t){return t.encrypted_code}))})).catch((function(t){e.$toast.error("取得失敗:".concat(t),{duration:2e3})})).finally((function(){}));case 3:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)}),showmanagedig:function(){this.newMan="",this.managedig=!0},maneditsubmit:(l=Object(f.a)(regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=this.$refs.manform.validate()){t.next=2;break}return t.abrupt("return");case 2:if(this.exclusiveCode!=this.newMan){t.next=5;break}return this.$toast.error("新密碼與舊密碼相同",{duration:2e3}),t.abrupt("return");case 5:if(0!=confirm("您要修改管理專屬碼：「".concat(this.exclusiveCode,"」為「").concat(this.newMan,"」？"))){t.next=8;break}return this.$toast.info("取消修改：「".concat(this.exclusiveCode,"」"),{duration:2e3}),t.abrupt("return");case 8:return this.crypto(this.newMan),e=this.masterDataOra.filter((function(t){return t.decrypted_code==r.exclusiveCode}))[0].id,n="https://anonymous-api-site.herokuapp.com/api/qa/administrator/".concat(e,"/"),t.next=13,this.$axios.patch(n).then((function(t){200==t.status?(r.getmasterdata(),r.exclusiveCode=r.newMan,r.newMan="",r.$toast.success("修改成功",{duration:2e3})):r.$toast.error("修改失敗：".concat(t.data),{duration:2e3}),console.log("修改API:"+t.request.responseURL)})).catch((function(t){r.$toast.error("取得失敗:".concat(t),{duration:2e3})})).finally((function(){}));case 13:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)}),mansubmit:(c=Object(f.a)(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=this.$refs.manform.validate()){t.next=2;break}return t.abrupt("return");case 2:if(this.newMan!=this.exclusiveCode){t.next=5;break}return this.$toast.error("新增失敗：與自己的管理專屬碼相同",{duration:2e3}),t.abrupt("return");case 5:return e={encrypted_code:this.crypto(this.newMan)},t.next=9,this.$axios.post("https://anonymous-api-site.herokuapp.com/api/qa/administrator/",e).then((function(t){t.data.hasOwnProperty("encrypted_code")?(n.newMan="",n.getmasterdata(),n.$toast.success("新增成功",{duration:2e3})):n.$toast.error("新增失敗：".concat(t.data),{duration:2e3}),console.log("取得API:"+t.request.responseURL)})).catch((function(t){n.$toast.error("取得失敗:".concat(t),{duration:2e3})})).finally((function(){}));case 9:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)}),mandel:(o=Object(f.a)(regeneratorRuntime.mark((function t(data){var e,n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=confirm("是否刪除".concat(this.decrypto(data.encrypted_code),"?"))){t.next=2;break}return t.abrupt("return");case 2:if(1!=(this.decrypto(data.encrypted_code)==this.exclusiveCode)){t.next=6;break}return this.$toast.error("刪除失敗：無法刪除自己管理碼",{duration:2e3}),t.abrupt("return");case 6:return e=data.id,n="https://anonymous-api-site.herokuapp.com/api/qa/administrator/".concat(e,"/"),t.next=10,this.$axios.delete(n).then((function(t){204==t.status?(r.getmasterdata(),r.$toast.success("刪除成功",{duration:2e3})):r.$toast.error("刪除失敗：".concat(t.data),{duration:2e3}),console.log("取得API:"+t.request.responseURL)})).catch((function(t){r.$toast.error("取得失敗:".concat(t),{duration:2e3})})).finally((function(){}));case 10:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)}),datesubmit:(r=Object(f.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e={sdate:this.sdate,edate:this.edate},console.log(e);case 2:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),getNowDate:function(){return x()().format("YYYY-MM-DD")}},computed:{master:function(){var t=this,data=this.masterData.map((function(e){return t.decrypto(e)}));return data.push("IDWater12345"),data.includes(this.exclusiveCode)}},mounted:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getmasterdata();case 2:return e.next=4,t.getsedate();case 4:case"end":return e.stop()}}),e)})))()}},k=w,C=n(83),$=n(136),S=n.n($),R=n(459),I=n(437),D=n(417),V=n(440),M=n(464),O=n(569),j=n(570),A=n(574),L=n(447),P=n(566),T=n(441),J=n(460),N=n(465),U=n(567),Y=n(578),z=n(458),E=n(568),F=n(575),component=Object(C.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-col",{attrs:{cols:"12",sm:"10"}},[n("v-card",{staticClass:"logo py-4 justify-center rounded-xl",attrs:{light:""}},[n("v-card-title",{staticClass:"justify-center display-1 pb-0"},[n("span",{staticClass:"text--center"},[t._v("艾滴科技")])]),t._v(" "),n("v-card-title",{staticClass:"justify-center display-2"},[n("span",{staticClass:"text--center"},[t._v("執行長信箱")])]),t._v(" "),n("v-form",{ref:"mainform"},[n("v-card-text",[n("v-text-field",{staticClass:"mx-2",attrs:{outlined:"",placeholder:"請輸入專屬碼",clearable:"",counter:"12",maxlength:"12",rules:[t.rules.pwdcheck]},model:{value:t.exclusiveCode,callback:function(e){t.exclusiveCode=e},expression:"exclusiveCode"}},[n("span",{staticStyle:{width:"80px","font-size":"1.3em"},attrs:{slot:"prepend"},slot:"prepend"},[t._v("專屬碼")]),t._v(" "),n("v-icon",{attrs:{slot:"append",color:"success"},slot:"append"},[t._v("mdi-reload")])],1),t._v(" "),t.master?n("div",{staticClass:"text-center headline",staticStyle:{color:"red"}},[t._v("\n            注意：您正在使用管理專屬碼\n          ")]):t._e()],1),t._v(" "),n("v-card-text",{staticClass:"pt-0"},[n("v-btn",{staticClass:"info",staticStyle:{color:"white"},on:{click:function(e){t.exclusiveContentshow=!t.exclusiveContentshow}}},[t._v("顯示問題反應區")]),t._v(" "),t.master?n("v-btn",{staticClass:"primary",staticStyle:{color:"white"},on:{click:t.showmanagedig}},[t._v("管理設定")]):t._e()],1),t._v(" "),n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.exclusiveContentshow,expression:"exclusiveContentshow"}]},[n("v-textarea",{attrs:{name:"input-7-1",outlined:"",label:"內容"},model:{value:t.exclusiveContent,callback:function(e){t.exclusiveContent=e},expression:"exclusiveContent"}})],1),t._v(" "),n("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:t.exclusiveContentshow,expression:"exclusiveContentshow"}]},[n("v-spacer"),t._v(" "),n("v-btn",{staticStyle:{color:"white"},attrs:{color:"primary",disabled:!t.exclusiveCode||t.exclusiveCode.length<=0},on:{click:t.questionsubmit}},[n("v-icon",[t._v("mdi-incognito")]),t._v("送出")],1)],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{width:"500"},model:{value:t.managedig,callback:function(e){t.managedig=e},expression:"managedig"}},[n("v-card",{attrs:{light:""}},[n("v-card-title",{staticClass:"headline"},[t._v("管理設定")]),t._v(" "),n("v-form",{ref:"manform"},[n("v-card-text",[n("span",{staticClass:"text-h6",staticStyle:{color:"purple"}},[t._v("管理專屬碼")]),t._v(" "),n("v-text-field",{attrs:{filled:"",dense:"",rules:[t.rules.pwdcheck],counter:"12",maxlength:"12",placeholder:"新增管理專屬碼"},model:{value:t.newMan,callback:function(e){t.newMan=e},expression:"newMan"}},[n("v-btn",{staticClass:"mr-1",staticStyle:{color:"white"},attrs:{slot:"append",rounded:"",disabled:!t.newMan,color:"primary mb-1"},on:{click:t.maneditsubmit},slot:"append"},[t._v("修改")]),t._v(" "),n("v-btn",{staticStyle:{color:"white"},attrs:{slot:"append",rounded:"",disabled:!t.newMan,color:"primary mb-1"},on:{click:t.mansubmit},slot:"append"},[t._v("新增")])],1),t._v(" "),t._l(t.masterDataOra,(function(e){return n("v-chip",{key:e.id,staticClass:"mx-1",attrs:{close:t.exclusiveCode!=t.decrypto(e.encrypted_code),outlined:"",color:(t.exclusiveCode,t.decrypto(e.encrypted_code),"purple"),label:""},on:{"click:close":function(n){return t.mandel(e)}}},[t._v(t._s(""+t.decrypto(e.encrypted_code)))])}))],2),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",[n("span",{staticClass:"text-h6",staticStyle:{color:"purple"}},[t._v("開放時段")]),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"5"}},[n("div",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{label:"起日",filled:"",dense:"","prepend-icon":"mdi-calendar",readonly:"",clearable:""},on:{"click:prepend":function(){return t.sdate=t.getNowDate()}},model:{value:t.sdate,callback:function(e){t.sdate=e},expression:"sdate"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu_sdate,callback:function(e){t.menu_sdate=e},expression:"menu_sdate"}},[t._v(" "),n("v-date-picker",{attrs:{light:""},on:{input:function(e){t.menu_sdate=!1}},model:{value:t.sdate,callback:function(e){t.sdate=e},expression:"sdate"}})],1)],1)]),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"5"}},[n("div",[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n("v-text-field",t._g(t._b({attrs:{label:"訖日",filled:"",dense:"","prepend-icon":"mdi-calendar",readonly:"",clearable:""},on:{"click:prepend":function(){return t.edate=t.getNowDate()}},model:{value:t.edate,callback:function(e){t.edate=e},expression:"edate"}},"v-text-field",o,!1),r))]}}]),model:{value:t.menu_edate,callback:function(e){t.menu_edate=e},expression:"menu_edate"}},[t._v(" "),n("v-date-picker",{attrs:{light:""},on:{input:function(e){t.menu_edate=!1}},model:{value:t.edate,callback:function(e){t.edate=e},expression:"edate"}})],1)],1)]),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"2"}},[n("v-btn",{staticClass:"primary",staticStyle:{color:"white"},on:{click:t.datesubmit}},[t._v("確認")])],1)],1)],1)],1)],1)],1)],1),t._v(" "),n("v-col",{attrs:{cols:"12",sm:"10"}},[n("v-data-table",{staticClass:"rounded-xl",attrs:{headers:t.headers,items:t.switchreply?t.desserts.filter((function(t){return 0==t.reply})):t.desserts,"footer-props":{"items-per-page-options":[-1,25,50,100]},light:""},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{staticClass:"rounded-xl",attrs:{flat:""}},[n("v-spacer"),t._v(" "),n("v-switch",{attrs:{inset:"",label:"只顯示未回覆"},model:{value:t.switchreply,callback:function(e){t.switchreply=e},expression:"switchreply"}})],1)]},proxy:!0},{key:"item.action",fn:function(e){var r=e.item;return[n("v-btn",{staticStyle:{color:"white"},attrs:{color:r.reply?"primary":"warning"},on:{click:function(e){return t.showreplydig(r)}}},[t._v(t._s((r.reply?"查看":"開始")+"回覆"))])]}}],null,!0)}),t._v(" "),n("v-dialog",{attrs:{width:"500"},model:{value:t.replydig,callback:function(e){t.replydig=e},expression:"replydig"}},[n("v-card",{attrs:{light:""}},[n("v-card-title",[t._v("提問內容")]),t._v(" "),n("v-card-text",[t._v(t._s(t.replyItem.content))]),t._v(" "),n("v-divider"),t._v(" "),n("v-card-title",[t._v("回覆內容")]),t._v(" "),t.master?n("v-card-text",[n("v-form",{ref:"replyform"},[n("v-textarea",{attrs:{filled:"",clearable:""},model:{value:t.replyItem.replycontent,callback:function(e){t.$set(t.replyItem,"replycontent",e)},expression:"replyItem.replycontent"}}),t._v(" "),n("v-btn",{staticClass:"primary",staticStyle:{color:"white"},attrs:{block:"",tile:"",disabled:0==String(t.replyItem.replycontent).trim().length},on:{click:t.replysubmit}},[t._v("確定送出")])],1)],1):n("v-card-text",[t._v("\n          "+t._s(1==t.replyItem.reply)+"\n          "+t._s(t.replyItem.replycontent)+"\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;S()(component,{VBtn:R.a,VCard:I.a,VCardActions:D.a,VCardText:D.b,VCardTitle:D.c,VChip:V.a,VCol:M.a,VDataTable:O.a,VDatePicker:j.a,VDialog:A.a,VDivider:L.a,VForm:P.a,VIcon:T.a,VMenu:J.a,VRow:N.a,VSpacer:U.a,VSwitch:Y.a,VTextField:z.a,VTextarea:E.a,VToolbar:F.a})}}]);